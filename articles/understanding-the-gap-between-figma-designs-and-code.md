---
title: "Figmaデザインとコードはなぜズレるのか"
emoji: "🐕"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [figma, html, css]
published: false
publication_name: "enjapan"
---

デザイナーが作成した Figma のデザインファイルを、エンジニアがコードに書き起こす際に、意図したデザインとのズレが生じることがあります。プロパティの設定ミスなどの単純な原因以外にも、Figma のレイアウト手法とは異なる実装方法であることに疑問を感じることが多々ありました。この疑問を解消するため、複数のエンジニアに Figma デザイン からコードへの変換プロセスを確認させていただきました。

結論、大きくは方法が違わないけど、コード化する前の手順が違うということに気づきました。つまり、エンジニアの Figma の理解度に違いがあり、デザインをコードに変換する際、エンジニアの解釈プロセスが実装のズレを生む一因となっています。

本記事では、エンジニアがデザインからコードを変換した実体験をもとにそのプロセスを考察し、より良い実装のための対応策を提案します。他の開発現場で少しでも参考になれば幸いです。

## 対象読者

- デザイナー、エンジニアがいる環境でそれぞれが専業で働いている方
- Figma デザインからコードを書き起こす経験が浅い方
- Figma の Dev Mode を利用している方（一部 Dev Mode でしか使えない機能の紹介があります）

## デザインとコードのズレ原因と対応策

Figma に慣れていない方、初めての方だとなんとなく Figma をポチポチ触っていれば、感覚的にとりあえず実装はできそうと思ってしまうのですが、それではエンジニアごとで解釈方法も異なり、一貫性のある実装が困難になります。実際、私自身も基礎知識が不十分な状態で実装を進めた経験から、この課題を実感しています。この問題を解決するには、エンジニアが Figma への理解を深め、デザイナーの意図を正確に把握することが重要です。そこで、原因は自身の経験と複数のエンジニアの実体験をもとに、ズレの原因を考察します。また、基本的にズレの原因の対応策は Figma Learn を参考、引用した形で紹介していきます。

@[card](https://help.figma.com/hc/ja/)

### いきなりポチポチしない

#### 原因

Q. Figma ファイルの URL が共有されたら、すぐに何をしますか？

A. デザインの全体像を把握する

大体の方がこのように回答するかなと思うのですが、把握の手順とかも言語化できるかどうかの観点だとばらつきがありそうです。自分の中で見ていく順序が明確にあってポチポチする分には問題ないですが、そうではなくてなんとなく雰囲気で理解していくと、どこかでズレが生じる原因になるかと思いました。そこで、デザインの全体像を把握するにあたって、どのように理解していくかの流れを細分化してみることにしました。

#### 対応策

デザインの全体像を理解していく流れの細分化は以下です。

1. Figma のプレビュー機能でプロトタイプのイメージを把握
2. レイヤーの確認
3. コンポーネントの確認
4. スタイルの確認

この流れは私自身の理解の大まかな流れで、それぞれのステップでデザイナーとの対話を大事にしていくことが大切です。各ステップの詳細は以下の見出しで触れていきます。

### 雰囲気でデザインの全体像を把握しない

#### 原因

Figma ファイルを共有いただいたときに、まずはじめにキャンバス上にある要素をマウスやトラックパッドとかで移動して見て、対象画面や対象のコンポーネントの仕様を把握していくことがあるかなと思います。デザインの全体像を把握した気にはなるのですが、その後何度も同じデザインの画面やコンポーネントを確認するケースがありました。複数回の確認が発生するのは、実装方針が固まっていないことが考えられ、見るたびに違う実装方針を考えてしまい、ズレが発生することがあるかと思いました。

#### 対応策

まず、はじめにやることとして何よりもおすすめなのは、プロトタイプを再生する機能を使うことです。プロトタイプの再生では、ホバー時やクリック時のアニメーションなどの具体的な操作方法を再現でき、実装イメージを持つことができます。

![プロトタイプの再生ボタン](/images/understanding-the-gap-between-figma-designs-and-code/inline-preview.png)
_Figma Learn より引用_

@[card](https://help.figma.com/hc/ja/articles/360040318013-%E3%83%97%E3%83%AD%E3%83%88%E3%82%BF%E3%82%A4%E3%83%97%E3%82%92%E5%86%8D%E7%94%9F)

:::message
プロトタイプの再生機能が使える条件の注意点

- プレビューまたはプレゼンテーションを行うためには、デザインがフレーム内に存在している必要があります。
- [フレーム](https://arc.net/l/quote/vjcmvrjq)とは、Figma の中でレイヤーを組み合わせる際のコンテナです。
  :::

### 雰囲気でマークアップしない

#### 原因

下記のカードが実装対象のとき、どういった実装をしますか？

![レイヤーのサンプル](/images/understanding-the-gap-between-figma-designs-and-code/layers.png)
_Figma Learn より引用_

#### 対応策

- デザイナーが意図したレイアウトを正しく読み取る。
  - Figma のレイアウトをベースにしつつ、UI を正しく解釈する
    - 脳内 CSS 　 DOM、px 使ったり使わなかったり
  - Auto Layout の使われ方やコンポーネントのネーミングルールを確認。
  - EveryLayout の考え方を理解して扱う（おすすめ）
    Zenn margin ではなく、レイアウトを指定しよう ~レイアウト手法 Stack、Cluster の紹介~
    https://zenn.dev/moneyforward/articles/075a74334ca512
  - レイヤーと HTML で合わせる。
  - コンポーネント自身が margin などレイアウトに関係するプロパティを持っていないかは確認する。
  - コンポーネントの外側から、コンポーネントの内側の制御をしようとしない

### コードスニペットは理解せず、コピペしない

:::message
こちらは、Dev Mode が利用できる方のみ
:::

#### 原因

Dev Mode ではオブジェクトをキャンバス上で選択すると、コードスニペットが開発モードのインスペクトパネルに表示されます。これは非常に便利な機能で、コードスニペットをコピペしてコードをまとめることができます。下記のように CSS が表示されたり、Figma プラグインを導入すれば React のコードとかも生成できます。便利な一方で、あまり理解せずにコードスニペットをコピペしてしまうと、意図したレイアウトとズレが発生したりします。

![コードスニペット](/images/understanding-the-gap-between-figma-designs-and-code/dev-mode.png)
_Figma Learn より引用_

#### 対応策

対応策は、とてもシンプルで理解せずにコードスニペットをコピペしないことです。

https://help.figma.com/hc/ja/articles/15023202277399-%E9%96%8B%E7%99%BA%E3%83%A2%E3%83%BC%E3%83%89%E3%81%A7%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%B9%E3%83%8B%E3%83%9A%E3%83%83%E3%83%88%E3%81%AE%E5%88%A9%E7%94%A8

    - スタイルの衝突が起こる（マージンの相殺）
    - プレイグラウンドを利用する

### ハンドオフをスムーズに行う

#### 原因

#### 対応策

- デザイナーとエンジニアの間で、デザインの説明が不足しているとズレが生じやすい。
- コンポーネント単位で Figma 上にコメントを残し、実装方針を共有。
- デザイナーと対話する
  - 文字間違いとか、スタイルあてにミスがあったりとか

## ハンドオフというよりコラボレーション

昨年、Figma Japan2 周年記念イベントに参加し、デザインとコードの間の関係性について考える機会を得ました。Figma は、単なるデザイナー向けのツールではなく、チームの視覚的なコラボレーションを支援するプラットフォームとして進化してきました。特に、エンジニアとデザイナーの関係性は密接であり、お互いの関心領域が重なることも多くなっています。

また、Figma の CEO である Dylan Field 氏もまたイベントにて「コラボレーション」という言葉を大事にされていた印象です。また、Figma 社の谷氏がハンドオフについても下記のスライドにて紹介されています。ざっくりとですが、下記のようにまとめました。

- Align：共通言語を持つ
- Inform：振る舞いや仕様のドキュメント化
- Connect：デザインとコードを繋げる

実装方針の各ステップでデザイナーとの対話を大事にし、わからないことがあればすぐにデザイナーに聞く。Figma をドキュメントツールとしても活用し、仕様変更があった際に記録を残す。
デザイナーとエンジニアがコラボレーションしながら環境を整えていくことが大事ということです。

https://www.figma.com/community/file/1397244591905482172

## まとめ

Figma デザインから コードへ変換する際には、単にデザインを見てコードに落とし込むのではなく、デザイナーの意図を正しく理解し、開発者の視点で最適な実装方法を考えることが重要です。そのためには、デザインの解釈を統一し、デザイナーとエンジニアの間でコラボレーションを行うことが求められます。エンジニアとデザイナーは密な関係性にあって、お互いの関心領域は人によって異なりますし、曖昧性がありますが、ここの曖昧性は大きい組織になればなるほど、暗黙知にならないようにすることが大事だと思っています。最終的には、試行錯誤して話し合いながら、お互いのベストパフォーマンスが何かを言語化できているのが理想状態なのかなと思いました。

今後、Figma の新機能である Code Connect のようなツールがさらに進化していくことで、デザインとコードの間のギャップは縮まるかもしれません。しかし、最も重要なのは、ツールの活用だけでなく、デザイナーとエンジニアが協力しながら開発を進める文化を醸成することだと考えています。本記事が、その点を考えるきっかけとなれば幸いです。

もっといい方法や意見がありましたら、ぜひコメントいただければと思います。
